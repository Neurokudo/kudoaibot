# üí∞ –°–∏—Å—Ç–µ–º–∞ –¥–≤—É—Ö —Ç–∏–ø–æ–≤ –º–æ–Ω–µ—Ç–æ–∫

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

KudoAiBot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤–∞ —Ç–∏–ø–∞ –º–æ–Ω–µ—Ç–æ–∫** —Å —Ä–∞–∑–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:

| –¢–∏–ø | –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å | –°–≥–æ—Ä–∞—é—Ç? | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----|--------------|----------|---------------|
| üü¢ **–ü–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ** | –ü–æ–¥–ø–∏—Å–∫–∏ (—Ç–∞—Ä–∏—Ñ—ã –Ω–∞ 30 –¥–Ω–µ–π) | ‚úÖ –î–∞, —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π | –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ |
| üü£ **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ** | –ü–æ–∫—É–ø–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ "–ö—É–ø–∏—Ç—å –º–æ–Ω–µ—Ç–∫–∏" | ‚ùå –ù–µ—Ç, –Ω–∞–≤—Å–µ–≥–¥–∞ | –û—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å–µ –Ω–∞–≤—Å–µ–≥–¥–∞ |

## üîÑ –õ–æ–≥–∏–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–Ω–∞—á–∞–ª–∞ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è **–ø–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ** üü¢, –∑–∞—Ç–µ–º **–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ** üü£

```python
# –ü—Ä–∏–º–µ—Ä
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç:
  üü¢ 50 –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö –º–æ–Ω–µ—Ç
  üü£ 100 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
  –í—Å–µ–≥–æ: 150 –º–æ–Ω–µ—Ç

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ –∑–∞ 30 –º–æ–Ω–µ—Ç:
  ‚Üì
–°–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è:
  üü¢ 30 –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö ‚Üí –æ—Å—Ç–∞–ª–æ—Å—å 20 –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö
  üü£ 100 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö ‚Üí –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ—â—ë –≤–∏–¥–µ–æ –∑–∞ 30 –º–æ–Ω–µ—Ç:
  ‚Üì
–°–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è:
  üü¢ 20 –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö ‚Üí –æ—Å—Ç–∞–ª–æ—Å—å 0 –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö
  üü£ 10 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö ‚Üí –æ—Å—Ç–∞–ª–æ—Å—å 90 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö
```

## üíé –ü–æ–¥–ø–∏—Å–∫–∏ (–ø–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ –º–æ–Ω–µ—Ç–∫–∏)

### –¢–∞—Ä–∏—Ñ—ã:

| –ù–∞–∑–≤–∞–Ω–∏–µ | –¶–µ–Ω–∞ | –ú–æ–Ω–µ—Ç | –ë–æ–Ω—É—Å | –ü—Ä–∏–º–µ—Ä–Ω–æ –≤–∏–¥–µ–æ |
|----------|------|-------|-------|----------------|
| üå± –ü—Ä–æ–±–Ω—ã–π | 390 ‚ÇΩ | 60 | ‚Äî | 2-3 –≤–∏–¥–µ–æ |
| ‚ú® –ë–∞–∑–æ–≤—ã–π | 990 ‚ÇΩ | 180 | +20% | 5-6 –≤–∏–¥–µ–æ |
| ‚≠ê –°—Ç–∞–Ω–¥–∞—Ä—Ç | 1990 ‚ÇΩ | 400 | +30% | 12-15 –≤–∏–¥–µ–æ |
| üíé –ü—Ä–µ–º–∏—É–º | 4990 ‚ÇΩ | 1100 | +40% | 30-40 –≤–∏–¥–µ–æ |
| üî• PRO Sora 2 Pro | 7490 ‚ÇΩ | 1600 | +50% | 20-25 HQ –≤–∏–¥–µ–æ |

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- ‚úÖ –ú–æ–Ω–µ—Ç–∫–∏ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É
- ‚è∞ –°–≥–æ—Ä–∞—é—Ç —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π
- üîÑ –ü—Ä–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏ —Å—Ç–∞—Ä—ã–µ –º–æ–Ω–µ—Ç–∫–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–æ–≤—ã–º–∏
- üí° –°—Ç–∏–º—É–ª–∏—Ä—É—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## üí∞ –ü–∞–∫–µ—Ç—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç–∫–∏)

### –ü–∞–∫–µ—Ç—ã:

| –ü–∞–∫–µ—Ç | –ú–æ–Ω–µ—Ç | –¶–µ–Ω–∞ | –ë–æ–Ω—É—Å |
|-------|-------|------|-------|
| üí∞ 50 –º–æ–Ω–µ—Ç | 50 | 990 ‚ÇΩ | ‚Äî |
| üí∞ 130 –º–æ–Ω–µ—Ç | 120 + 10 üéÅ | 1990 ‚ÇΩ | +8% |
| üí∞ 280 –º–æ–Ω–µ—Ç | 250 + 30 üéÅ | 3990 ‚ÇΩ | +12% |
| üí∞ 575 –º–æ–Ω–µ—Ç | 500 + 75 üéÅ | 7490 ‚ÇΩ | +15% |

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- ‚ôæÔ∏è –ú–æ–Ω–µ—Ç–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞
- üéÅ –ë–æ–Ω—É—Å—ã –∑–∞ –∫—Ä—É–ø–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏
- üìä –†–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
- üí° –î–ª—è –≥–∏–±–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

```sql
CREATE TABLE users (
    user_id BIGINT PRIMARY KEY,
    
    -- –î–≤–∞ –±–∞–ª–∞–Ω—Å–∞
    subscription_coins INT DEFAULT 0,  -- üü¢ –°–≥–æ—Ä–∞—é—Ç
    permanent_coins INT DEFAULT 0,     -- üü£ –ù–µ —Å–≥–æ—Ä–∞—é—Ç
    
    -- –û–±—â–∏–π –±–∞–ª–∞–Ω—Å (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    balance INT DEFAULT 0,
    ...
);
```

### –§—É–Ω–∫—Ü–∏–∏:

```python
# app/services/dual_balance.py

# –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å—ã
balance = await get_user_dual_balance(user_id)
# ‚Üí {'subscription_coins': 50, 'permanent_coins': 100, 'total': 150}

# –°–ø–∏—Å–∞—Ç—å –º–æ–Ω–µ—Ç–∫–∏ (—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º)
result = await deduct_coins(user_id, 30)
# ‚Üí –°–ø–∏—Å—ã–≤–∞–µ—Ç —Å–Ω–∞—á–∞–ª–∞ —Å subscription_coins, –ø–æ—Ç–æ–º —Å permanent_coins

# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ –º–æ–Ω–µ—Ç–∫–∏
await add_subscription_coins(user_id, 400)

# –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç–∫–∏
await add_permanent_coins(user_id, 250)

# –°–±—Ä–æ—Å–∏—Ç—å –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ (–ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏)
await reset_subscription_coins(user_id)
```

## üé® –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –±–æ—Ç–µ

### –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```
üë§ –ü—Ä–æ—Ñ–∏–ª—å

–ò–º—è: –ê–Ω—Ç–æ–Ω
üí∞ –ë–∞–ª–∞–Ω—Å: 315 –º–æ–Ω–µ—Ç
‚îú üü¢ –ü–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ: 215 (—Å–≥–æ—Ä–∞—é—Ç 20.11.2025)
‚îî üü£ –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ: 100 (–Ω–∞–≤—Å–µ–≥–¥–∞)

üìä –¢–∞—Ä–∏—Ñ: ‚≠ê –°—Ç–∞–Ω–¥–∞—Ä—Ç
üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: 20.11.2025
```

### –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –º–æ–Ω–µ—Ç–æ–∫:

```
‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç–æ–∫!

–°—Ç–æ–∏–º–æ—Å—Ç—å: 40 –º–æ–Ω–µ—Ç
–í–∞—à –±–∞–ª–∞–Ω—Å: 15 –º–æ–Ω–µ—Ç (üü¢ 5 + üü£ 10)

üí° –í–∞—Ä–∏–∞–Ω—Ç—ã:
‚Ä¢ –ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É (–º–æ–Ω–µ—Ç–∫–∏ –¥–µ—à–µ–≤–ª–µ)
‚Ä¢ –î–æ–∫—É–ø–∏—Ç—å –º–æ–Ω–µ—Ç–∫–∏ (–Ω–µ —Å–≥–æ—Ä–∞—é—Ç)
```

## ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≥–æ—Ä–∞–Ω–∏–µ

```python
# –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ (–∫–∞–∂–¥—ã–π —á–∞—Å)
async def check_expired_subscriptions():
    # –ù–∞—Ö–æ–¥–∏–º –∏—Å—Ç—ë–∫—à–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
    expired = await get_expired_subscriptions()
    
    for sub in expired:
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ –º–æ–Ω–µ—Ç–∫–∏
        await reset_subscription_coins(sub.user_id)
        
        # –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        await notify_subscription_expired(sub.user_id)
```

## üìä –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è —Å–∏—Å—Ç–µ–º—ã

### –ü–æ—á–µ–º—É –¥–≤–µ —Å–∏—Å—Ç–µ–º—ã?

1. **–ü–æ–¥–ø–∏—Å–∫–∞ (—Å–≥–æ—Ä–∞—é—â–∏–µ)**:
   - ‚úÖ –ë–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω–∞—è —Ü–µ–Ω–∞ –∑–∞ –º–æ–Ω–µ—Ç–∫—É
   - ‚úÖ –°—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
   - ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –¥–æ—Ö–æ–¥

2. **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (–≤–µ—á–Ω—ã–µ)**:
   - ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - ‚úÖ –ù–µ—Ç –¥–∞–≤–ª–µ–Ω–∏—è "—É—Å–ø–µ—Ç—å –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å"
   - ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ—Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:

```
–ü–æ–¥–ø–∏—Å–∫–∞ "–°—Ç–∞–Ω–¥–∞—Ä—Ç": 400 –º–æ–Ω–µ—Ç = 1990 ‚ÇΩ ‚Üí 4.97 ‚ÇΩ/–º–æ–Ω–µ—Ç–∫–∞
–ü–∞–∫–µ—Ç 280 –º–æ–Ω–µ—Ç: 280 –º–æ–Ω–µ—Ç = 3990 ‚ÇΩ ‚Üí 14.25 ‚ÇΩ/–º–æ–Ω–µ—Ç–∫–∞

–ü–æ–¥–ø–∏—Å–∫–∞ –≤—ã–≥–æ–¥–Ω–µ–µ –ø–æ—á—Ç–∏ –≤ 3 —Ä–∞–∑–∞!
‚Üí –ú–æ—Ç–∏–≤–∞—Ü–∏—è –ø–æ–∫—É–ø–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚Üí –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ
```

## üìà –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

```
–ü–æ–∫—É–ø–∞–µ—Ç: ‚≠ê –°—Ç–∞–Ω–¥–∞—Ä—Ç (1990 ‚ÇΩ)
–ü–æ–ª—É—á–∞–µ—Ç: 400 üü¢ –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö –º–æ–Ω–µ—Ç
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç: 300 –º–æ–Ω–µ—Ç –∑–∞ –º–µ—Å—è—Ü
–û—Å—Ç–∞—Ç–æ–∫: 100 –º–æ–Ω–µ—Ç —Å–≥–æ—Ä–∞—é—Ç

–ü—Ä–æ–¥–ª–µ–≤–∞–µ—Ç: ‚≠ê –°—Ç–∞–Ω–¥–∞—Ä—Ç (–µ—â—ë 1990 ‚ÇΩ)
–ü–æ–ª—É—á–∞–µ—Ç: 400 –Ω–æ–≤—ã—Ö üü¢ –º–æ–Ω–µ—Ç
–°—Ç–∞—Ä—ã–µ: 100 –º–æ–Ω–µ—Ç —Å–≥–æ—Ä–∞—é—Ç
–ò—Ç–æ–≥–æ: 400 —Å–≤–µ–∂–∏—Ö –º–æ–Ω–µ—Ç –Ω–∞ –Ω–æ–≤—ã–π –º–µ—Å—è—Ü
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–µ—Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

```
–ü–æ–∫—É–ø–∞–µ—Ç: 280 üü£ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç (3990 ‚ÇΩ)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç: 50 –º–æ–Ω–µ—Ç –≤ –ø–µ—Ä–≤—ã–π –º–µ—Å—è—Ü
–û—Å—Ç–∞—Ç–æ–∫: 230 –º–æ–Ω–µ—Ç

–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞:
–û—Å—Ç–∞—Ç–æ–∫: –í—Å—ë –µ—â—ë 230 –º–æ–Ω–µ—Ç! ‚ôæÔ∏è
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç: –ö–æ–≥–¥–∞ –∑–∞—Ö–æ—á–µ—Ç, –±–µ–∑ —Å–ø–µ—à–∫–∏
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

```
–ò–º–µ–µ—Ç: –ü–æ–¥–ø–∏—Å–∫–∞ + –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
  üü¢ 400 –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö (–æ—Ç —Ç–∞—Ä–∏—Ñ–∞)
  üü£ 150 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö (–¥–æ–∫—É–ø–∏–ª)
  –í—Å–µ–≥–æ: 550 –º–æ–Ω–µ—Ç

–ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
  - –ü–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ —Ç—Ä–∞—Ç—è—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å
  - –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è "–ø—Ä–æ –∑–∞–ø–∞—Å"
  - –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –≤—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ—é –º–æ–¥–µ–ª—å
‚úÖ **–í—ã–≥–æ–¥–∞** - –ø–æ–¥–ø–∏—Å–∫–∞ –¥–µ—à–µ–≤–ª–µ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö
‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ** - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Ä–µ–¥–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚úÖ **–ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è** - –¥–≤–∞ —Ç–∏–ø–∞ –º–æ–Ω–µ—Ç–æ–∫ —Å–æ–∑–¥–∞—é—Ç –≥–ª—É–±–∏–Ω—É
‚úÖ **–ú–æ—Ç–∏–≤–∞—Ü–∏—è** - —Å–≥–æ—Ä–∞–Ω–∏–µ —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## üìù –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤
UPDATE users 
SET permanent_coins = balance,  -- –°—Ç–∞—Ä—ã–µ –º–æ–Ω–µ—Ç–∫–∏ ‚Üí –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ
    balance = balance           -- –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å
WHERE permanent_coins = 0;
```

## üîß API

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
balance = await get_user_dual_balance(user_id)
print(balance)  
# {'subscription_coins': 200, 'permanent_coins': 50, 'total': 250}

# –°–ø–∏—Å–∞–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
result = await deduct_coins(user_id, 100)
# –°–ø–∏—à–µ—Ç: 100 —Å –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö ‚Üí –æ—Å—Ç–∞–Ω–µ—Ç—Å—è 100 –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö, 50 –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö

# –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ—á–Ω—ã—Ö
await add_subscription_coins(user_id, 400)

# –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö
await add_permanent_coins(user_id, 250)
```

---

**–°–∏—Å—Ç–µ–º–∞ –¥–≤—É—Ö —Ç–∏–ø–æ–≤ –º–æ–Ω–µ—Ç–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!** üéâ

